{% extends "docs/doc_layout.html" %}

{% block doc_title %}API Reference - Python SDK{% endblock %}

{% block doc_content %}
{% set active_page = 'api' %}

<div class="mb-12">
    <h1 class="text-3xl font-bold text-white mb-4">API Reference</h1>
    <p class="text-gray-400">
        Complete reference for the <code class="text-crous-400">tubox_client</code> package.
    </p>
</div>

<!-- Config -->
<div class="mb-20">
    <h2 class="text-2xl font-bold text-white mb-6 border-b border-white/10 pb-2">Configuration</h2>

    <div class="mb-12">
        <h3 class="font-mono text-lg text-crous-400 mb-2">class ClientConfig</h3>
        <p class="text-gray-400 mb-4 text-sm">Container for client connection settings.</p>

        <div class="bg-zinc-900 border border-white/5 rounded-lg p-4 font-mono text-xs text-gray-300 mb-4">
            __init__(host: str, port: int, max_pool_size: int = 10, ...)
        </div>

        <ul class="space-y-2 text-sm text-gray-400 ml-4 list-disc">
            <li><code class="text-white">host</code>: Server hostname</li>
            <li><code class="text-white">port</code>: Server port (default 61200)</li>
            <li><code class="text-white">connect_timeout</code>: Max time (s) to wait for connection</li>
        </ul>
    </div>
</div>

<!-- TuboxClient -->
<div class="mb-20">
    <h2 class="text-2xl font-bold text-white mb-6 border-b border-white/10 pb-2">Client</h2>

    <div class="mb-12">
        <h3 class="font-mono text-lg text-crous-400 mb-2">class TuboxClient</h3>
        <p class="text-gray-400 mb-4 text-sm">Main entry point for the SDK.</p>

        <!-- Methods -->
        <div class="space-y-8">
            <div>
                <div class="bg-zinc-900 border border-white/5 rounded-lg p-3 font-mono text-xs text-blue-300 mb-2">
                    connect() -> bool
                </div>
                <p class="text-sm text-gray-400">Establishes connection pool to the server.</p>
            </div>

            <div>
                <div class="bg-zinc-900 border border-white/5 rounded-lg p-3 font-mono text-xs text-blue-300 mb-2">
                    authenticate(username: str, password: str) -> bool
                </div>
                <p class="text-sm text-gray-400">Authenticates user and retrieves session token.</p>
                <p class="text-xs text-red-400 mt-1">Raises: AuthenticationError</p>
            </div>

            <div>
                <div class="bg-zinc-900 border border-white/5 rounded-lg p-3 font-mono text-xs text-blue-300 mb-2">
                    database(name: str) -> TuboxAPIDatabase
                </div>
                <p class="text-sm text-gray-400">Get a database reference.</p>
            </div>

            <div>
                <div class="bg-zinc-900 border border-white/5 rounded-lg p-3 font-mono text-xs text-blue-300 mb-2">
                    start_session(timeout_seconds: int = 3600) -> ClientSession
                </div>
                <p class="text-sm text-gray-400">Start a new session for transactions.</p>
            </div>
        </div>
    </div>
</div>

<!-- Collection -->
<div class="mb-20">
    <h2 class="text-2xl font-bold text-white mb-6 border-b border-white/10 pb-2">Collection</h2>

    <div class="mb-12">
        <h3 class="font-mono text-lg text-crous-400 mb-2">class TuboxAPICollection</h3>

        <div class="space-y-8 mt-6">
            <div>
                <div class="bg-zinc-900 border border-white/5 rounded-lg p-3 font-mono text-xs text-blue-300 mb-2">
                    insert_one(document: Dict, session=None) -> OperationResult
                </div>
                <p class="text-sm text-gray-400">Insert a single document.</p>
            </div>
            <div>
                <div class="bg-zinc-900 border border-white/5 rounded-lg p-3 font-mono text-xs text-blue-300 mb-2">
                    find(query: Dict, limit: int = 0, ...) -> OperationResult
                </div>
                <p class="text-sm text-gray-400">Find documents matching query.</p>
            </div>
            <div>
                <div class="bg-zinc-900 border border-white/5 rounded-lg p-3 font-mono text-xs text-blue-300 mb-2">
                    update_one(query: Dict, update: Dict, ...) -> OperationResult
                </div>
                <p class="text-sm text-gray-400">Update first matching document.</p>
            </div>
        </div>
    </div>
</div>


<div class="flex items-center justify-between pt-12 mt-12 border-t border-white/10">
    <a href="/docs/python/transactions"
        class="flex items-center gap-2 text-gray-400 hover:text-white transition-colors">
        <i data-lucide="arrow-left" class="w-4 h-4"></i> Transactions
    </a>
    <div></div>
</div>

{% endblock %}