"""
Production-Grade Module Manifest: mymodule
Generated by: aq add module mymodule

Defines complete module configuration including:
- Services with DI scopes and lifecycle
- Controllers with routing
- Middleware with scoping and priority
- Sessions with policies
- Error handling with fault domains
- Feature flags with conditional activation
"""

from datetime import timedelta
from aquilia import AppManifest
from aquilia.manifest import (
    FaultHandlingConfig, FaultHandlerConfig,
    MiddlewareConfig,
    SessionConfig,
    LifecycleConfig,
    FeatureConfig,
)


# Production-grade manifest with complete configuration
manifest = AppManifest(
    # Identity
    name="mymodule",
    version="0.1.0",
    description="Mymodule module",
    author="team@company.com",
    tags=["mymodule", "core"],

                # Services with detailed DI configuration
    services=[
        "modules.mymodule.services:MymoduleService",
    ],
                # Controllers with routing
    controllers=[
        "modules.mymodule.controllers:MymoduleController",
    ],
    # Middleware configuration
    middleware=[
        # Example middleware (uncomment to add):
        # MiddlewareConfig(
        #     class_path="modules.mymodule.middleware:AuthMiddleware",
        #     scope="app",
        #     priority=10,
        #     config={},
        # ),
    ],

    # Routing configuration
    route_prefix="/mymodule",
    base_path="modules.mymodule",

    # Error handling with fault domains
    faults=FaultHandlingConfig(
        default_domain="MYMODULE",
        strategy="propagate",
        handlers=[
            # Example fault handler (uncomment to add):
            # FaultHandlerConfig(
            #     domain="MYMODULE:NOT_FOUND",
            #     handler_path="modules.mymodule.handlers:handle_not_found",
            # ),
        ],
    ),

    # Session management
    sessions=[
        # Example session (uncomment to add):
        # SessionConfig(
        #     name="mymodule_session",
        #     enabled=True,
        #     ttl=timedelta(days=7),
        #     idle_timeout=timedelta(hours=1),
        #     transport="cookie",
        #     store="memory",
        # ),
    ],

    # Feature flags
    features=[
        # Example feature (uncomment to add):
        # FeatureConfig(
        #     name="advanced_search",
        #     enabled=False,
        # ),
    ],

    # Dependencies on other modules
    depends_on=[],
)


__all__ = ["manifest"]