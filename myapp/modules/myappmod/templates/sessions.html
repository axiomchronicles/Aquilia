{% extends "base.html" %}

{% block title %}Sessions - Aquilia App{% endblock %}

{% block content %}
<div class="card">
    <h2 style="color: #333; margin-bottom: 1rem;">Active Sessions</h2>
    
    {% if sessions %}
        <table>
            <thead>
                <tr>
                    <th>Session ID</th>
                    <th>Created</th>
                    <th>Expires</th>
                    <th>Authenticated</th>
                    <th>Data Size</th>
                </tr>
            </thead>
            <tbody>
                {% for sess in sessions %}
                    <tr>
                        <td><code style="font-size: 0.85rem;">{{ sess.id }}</code></td>
                        <td>{{ sess.created_at | default('N/A') }}</td>
                        <td>{{ sess.expires_at | default('Never') }}</td>
                        <td>
                            {% if sess.authenticated %}
                                <span class="badge badge-success">Yes</span>
                            {% else %}
                                <span class="badge badge-danger">No</span>
                            {% endif %}
                        </td>
                        <td>{{ sess.data_size | default('0') }} bytes</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p style="color: #666;">No sessions found.</p>
    {% endif %}
</div>

<div class="card">
    <h3 style="color: #333; margin-bottom: 1rem;">Current Session Details</h3>
    
    {% if session %}
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
            <div>
                <strong>Session ID</strong><br>
                <code style="background: #f5f5f5; padding: 0.5rem; border-radius: 3px; display: block; word-break: break-all;">
                    {{ session.id }}
                </code>
            </div>
            <div>
                <strong>Created</strong><br>
                <p>{{ session.created_at }}</p>
            </div>
            <div>
                <strong>Expires</strong><br>
                <p>{{ session.expires_at }}</p>
            </div>
            <div>
                <strong>Data Keys</strong><br>
                <p>{{ session.data.keys() | list | length }} keys</p>
            </div>
        </div>
    {% else %}
        <p style="color: #666;">No active session.</p>
    {% endif %}
</div>

<div style="margin-top: 1rem;">
    <a href="/myappmod/dashboard" class="btn btn-secondary">Back to Dashboard</a>
</div>
{% endblock %}
